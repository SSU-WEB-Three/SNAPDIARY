<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Snapnote</title>
    <link rel="stylesheet" href="./css/index.css">
</head>
<body>
    <!-- ë©”ì¸ ì˜ì—­ -->
    <div class="main-container">
        <!-- ì™¼ìª½ í° ì¹´ë“œì™€ ê²€ìƒ‰ ì˜ì—­ -->
        <div class="left-block">
            <div class="large-card" id="interactive-card">
                <div class="card-header"></div>
                <!-- ê¸°ë¡ê³¼ ì…ë ¥ ì¶œë ¥ ì˜ì—­ -->
                <div class="log-container" id="log-container"></div>
            </div>
            <!-- ê²€ìƒ‰ ì˜ì—­ -->
            <div class="search-bar">
                <input type="text" placeholder="ì˜¤ëŠ˜ì˜ ê¸°ë¡ì„ ë‚¨ê²¨ë³´ì„¸ìš”" id="search-input">
                <button class="search-btn" id="search-btn">ğŸ”</button>
            </div>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ì‘ì€ ì¹´ë“œë“¤ -->
        <div class="small-card-container">
            <div class="small-card" id="quote-card">
                <div class="card-header"></div>
                <p>ì˜¤ëŠ˜ì˜ ëª…ì–¸</p>
                <p id="quote-text">ì˜¤ëŠ˜ì˜ ëª…ì–¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                <p id="quote-author" class="quote-author"></p>
            </div>
            <div class="small-card">
                <div class="card-header"></div>
                <p>ì»¤ë®¤ë‹ˆí‹°</p>
            </div>
        </div>
    </div>

    <!-- í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
// ëœë¤ ë¬¸êµ¬ ë¦¬ìŠ¤íŠ¸
const greetings = [
    "ì•ˆë…•í•˜ì„¸ìš”. ì˜¤ëŠ˜ í•˜ë£¨ ì–´ë– ì‹ ê°€ìš”? ì˜¤ëŠ˜ë„ í™œê¸°ì°¨ê²Œ ì‹œì‘í•´ë³´ì„¸ìš”!",
    "ì˜¤ëŠ˜ë„ í™œê¸°ì°¨ê²Œ ì‹œì‘í•´ë³¼ê¹Œìš”? ì–´ë–¤ ì¼ì´ë“  ì°¨ë¶„í•˜ê²Œ í•´ë‚˜ê°€ë©´ ì˜ ë  ê±°ì˜ˆìš”!",
    "ë¬´ìŠ¨ ì¼ì´ë“  ì˜ í’€ë¦¬ê¸¸ ë°”ë„ê²Œìš”! ì˜¤ëŠ˜ì€ ì–´ì œë³´ë‹¤ ë” ë‚˜ì€ í•˜ë£¨ê°€ ë  ê±°ì˜ˆìš”!",
    "í•˜ë£¨ì˜ ì‹œì‘ì„ ê¸°ë¶„ ì¢‹ê²Œ ë§Œë“¤ì–´ ë´…ì‹œë‹¤! ì‘ì€ ë³€í™”ë„ ë‚˜ë¥¼ ì„±ì¥ì‹œí‚µë‹ˆë‹¤.",
    "ê¸°ë¶„ ì¢‹ì€ í•˜ë£¨ê°€ ë˜ê¸¸ ë°”ëë‹ˆë‹¤! ì˜¤ëŠ˜ í•˜ë£¨ë„ ë‹¹ì‹ ì˜ ì´ì•¼ê¸°ë¥¼ ë“¤ë ¤ì£¼ì„¸ìš”.",
    "ì–´ë–¤ ì¼ì´ë“  ì°¨ë¶„í•˜ê²Œ í•´ë‚˜ê°€ë©´ ì˜ ë  ê±°ì˜ˆìš”! ì‘ì€ ì„±ì·¨ë„ ì†Œì¤‘í•˜ê²Œ ì—¬ê²¨ë³´ì„¸ìš”.",
    "ì˜¤ëŠ˜ í•˜ë£¨ë„ í™”ì´íŒ…! ì§€ì¹˜ë”ë¼ë„ ì ê¹ ì‰¬ì–´ê°€ë„ ê´œì°®ì•„ìš”.",
    "ì¢‹ì€ ì¼ì´ ê°€ë“í•œ í•˜ë£¨ ë³´ë‚´ì„¸ìš”! ê°€ë”ì€ ê³„íší•˜ì§€ ì•Šì€ ì¼ì´ ë” íŠ¹ë³„í•˜ë‹µë‹ˆë‹¤.",
    "ì˜¤ëŠ˜ì€ ë¬´ì—‡ì„ í•´ë³¼ê¹Œìš”? ìƒˆë¡œìš´ ë„ì „ì„ í–¥í•´ í•œ ê±¸ìŒ ë” ë‚˜ì•„ê°€ë´ìš”.",
    "ê¸°ë¶„ ì¢‹ì€ ìƒê°ìœ¼ë¡œ ì‹œì‘í•´ë´ìš”! ê¸ì •ì ì¸ ë§ˆìŒì´ í•˜ë£¨ë¥¼ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ë§¤ì¼ ë˜‘ê°™ì€ í•˜ë£¨ë¼ë„ ì˜¤ëŠ˜ì€ íŠ¹ë³„í•  ê±°ì˜ˆìš”! ì–´ì œì™€ ë‹¤ë¥¸ ë¬´ì–¸ê°€ë¥¼ ì°¾ì•„ë´ìš”.",
    "ì˜¤ëŠ˜ í•˜ë£¨ ì¤‘ ê°€ì¥ ê¸°ì–µì— ë‚¨ëŠ” ìˆœê°„ì€ ë¬´ì—‡ì¸ê°€ìš”? ì†Œì†Œí•œ ì¼ë„ ê¸°ì–µí•´ë³¼ê¹Œìš”?",
    "ì¡°ê¸ˆ í˜ë“¤ì—ˆë˜ ìˆœê°„ë„ ìˆì—ˆë‚˜ìš”? ê·¸ë˜ë„ ëê¹Œì§€ í•´ë‚¸ ë‹¹ì‹ ì´ ëŒ€ë‹¨í•©ë‹ˆë‹¤.",
    "ì–´ì œì™€ ë‹¤ë¥¸ ì˜¤ëŠ˜ì˜ íŠ¹ë³„í•¨ì„ ì°¾ì•„ë³´ì„¸ìš”! ì‚¬ì†Œí•œ ë³€í™”ë„ ì†Œì¤‘íˆ ì—¬ê²¨ë³´ì„¸ìš”.",
    "ì˜¤ëŠ˜ë„ ê¸°ë¡ì„ í†µí•´ ë‚˜ë¥¼ ëŒì•„ë³´ì„¸ìš”. ì‘ì€ ìˆœê°„ë“¤ì´ ëª¨ì—¬ íŠ¹ë³„í•œ í•˜ë£¨ê°€ ë©ë‹ˆë‹¤.",
    "í¬ê³  ëŒ€ë‹¨í•œ ì¼ì´ ì•„ë‹ˆì–´ë„ ì¢‹ì•„ìš”. ì˜¤ëŠ˜ ë‹¹ì‹ ì´ í•´ë‚¸ ì‘ì€ ì„±ì·¨ë¥¼ ê¸°ì–µí•´ë´ìš”.",
    "ë§¤ì¼ ìƒˆë¡œìš´ í•˜ë£¨ê°€ ì°¾ì•„ì˜µë‹ˆë‹¤. ì˜¤ëŠ˜ë„ ë‚˜ë§Œì˜ ì†ë„ë¡œ ë‚˜ì•„ê°€ë©´ ì¶©ë¶„í•´ìš”.",
    "ì˜¤ëŠ˜ì˜ ê°ì •ì„ ì†”ì§í•˜ê²Œ ë‚¨ê²¨ë³´ì„¸ìš”. ê·¸ ê°ì •ë„ ì˜¤ëŠ˜ì˜ ì†Œì¤‘í•œ ì¼ë¶€ëë‹ˆë‹¤.",
    "ê¸°ì–µí•˜ê¸° ê·€ì°®ë‹¤ë©´ ì§€ê¸ˆ ê°„ë‹¨í•˜ê²Œ í•œ ì¤„ë¡œ ë‚¨ê²¨ë³´ì„¸ìš”. ì§§ì•„ë„ ë‹¹ì‹ ë§Œì˜ ì´ì•¼ê¸°ì˜ˆìš”.",
    "ì–´ì œì™€ ë‹¬ëë˜ ìˆœê°„ì„ í•œ ì¤„ë¡œ ë‚¨ê²¨ë³¼ê¹Œìš”? í‰ë²”í•´ ë³´ì´ì§€ë§Œ íŠ¹ë³„í•œ ê¸°ë¡ì´ ë  ê±°ì˜ˆìš”."
];


// ëœë¤ ì¸ë±ìŠ¤ ì„ íƒ í•¨ìˆ˜
function getRandomGreeting() {
    const index = Math.floor(Math.random() * greetings.length);
    return greetings[index];
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ greeting-text ë¨¼ì € ì¶œë ¥
document.addEventListener("DOMContentLoaded", () => {
    const randomMessage = getRandomGreeting();
    addLog(randomMessage, "left");
});

// í•„í„°ë§ ë‹¨ì–´ ëª©ë¡ (ë¹„ì†ì–´, ìš•ì„¤ ë“±)
const prohibitedWords = [
    // ì¼ë°˜ ìš•ì„¤
    "ì”¨ë°œ", "ì‹œë°œ", "ã……ã…‚", "ã…†ã…‚", "ã…†ë°œ", "ã……ë°œ", "ã……ã…£ë°œ", "ã…†ã…£ë°œ", 
    "ê°œìƒˆë¼", "ê°œìƒˆ", "ê°œìƒ‰ê¸°", "ê°œìƒ‰ë¼", "ê°œìƒ‰íˆ", "ê°œì‰‘", "ê°œìì‹", 
    "ì…", "ìŒë…„", "ìŒë†ˆ", "ì— ì°½", "ì—¼ë³‘", "ì— ë³‘", "ì¢†", "ì¢ƒ", "ì¡´ë‚˜", 
    "ì¡´1ë‚˜", "ì¡´ã„´ë‚˜", "ì¡°ë‚¸", "ì¡±ê°™ë‹¤", "ì¢†ê°™ë‹¤", "ê¼´ê°’", "ê¼´ê¹", 
    "ë‹¥ì³", "ë‹¥ì¹˜ë¼", "ë‹¥ì¹˜ê³ ", "ë‹¥ì¹˜ì„¸", "ë‹¥ì¹˜ì„¸ìš”", "êº¼ì ¸", "êº¼ì§€ì„¸ìš”", 
    "ë’¤ì ¸", "ë””ì ¸", "ì£½ì–´", "ì£½ì–´ë¼", "ì£½ìœ¼ë¼", "ì£½ì„ë˜", "ë’¤ì§ˆë˜", 
    "ì³ì£½ì¼", "ì³ë§ì„", "ì³ë¨¹ì„", "ì³ì£½ì—¬", "ì³ë­‰ê°œ", "ì¢†ê¹Œ", "ì¢†ë°¥", 

    // ë¹„í•˜ ë° ì°¨ë³„ í‘œí˜„
    "ë³‘ì‹ ", "ë¸…ì‹ ", "ë¹™ì‹ ", "ì •ì‹ ë³‘ì", "ì§€ì¡ëŒ€", "ë…¸ê°€ë‹¤", "ë…¸ì˜ˆ", 
    "í˜¸êµ¬", "ì°Œì§ˆ", "ì°ë”°", "ì¥ì• ì¸", "ì¥ì• ì", "ì €ëŠ¥ì•„", "ë°±ì¹˜", 
    "í™ì–´", "ê¼½ì¶”", "ëŠ¬ê¸°ë¯¸", "ëŠ¬ë¯¸", 

    // ì™¸ë˜ì–´/ì•ŒíŒŒë²³ ë¹„ì†ì–´
    "fuck", "fxxk", "fxxxk", "fxxxking", "fcuk", "fk", "shit", 
    "bitch", "asshole", "bastard", "idiot", "moron", "wtf", "damn", 
    "stfu", "fck", "fking", "fcking", "dick", "pussy", 

    "ê¼´í†µ", "ë˜ë¼ì´", "ë„ë¼ì´", "ì •ì‹ ë³‘", "ë¯¸ì¹œë†ˆ", "ë¯¸ì¹œë…„", 
    "ê°œê°™ë‹¤", "ê°œê°™ì´", "ê°œíŒ", "ë¯¸ì¹œ", "ë²„ëŸ¬ì§€", "ë²Œë ˆ", 
    "ì“°ë ˆê¸°", "ì¡ë†ˆ", "ì¡ë…„", "í˜¸êµ¬", "ì™•ë”°", "ë°”ë³´", "ë©ì²­ì´", 
    "ê³ ì", "ê°œë¼ì§€", "ë¬´ë‡Œ", "ì €ëŠ¥", "ê±°ì§€", "ì“°ë ˆê¸°"
];

// ìµœì†Œ ì…ë ¥ ê¸¸ì´ ì„¤ì •
const MIN_INPUT_LENGTH = 10;

// ì…ë ¥ ê²€ì¦ í•¨ìˆ˜
function isInputValid(text) {
    // ê³µë°± ì œê±° ë° ì†Œë¬¸ìë¡œ ë³€í™˜
    const cleanedText = text.trim().toLowerCase();

    // ì§§ì€ ê¸€ì í•„í„°ë§
    if (cleanedText.length < MIN_INPUT_LENGTH) {
        alert(`ì…ë ¥í•œ ë¬¸ì¥ì´ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ ${MIN_INPUT_LENGTH}ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
        return false;
    }

    // í•„í„°ë§ ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
    for (const word of prohibitedWords) {
        if (cleanedText.includes(word)) {
            alert("ë¶€ì ì ˆí•œ í‘œí˜„ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
            return false;
        }
    }
    return true;
}

// ì…ë ¥ ê²€ì¦ í•¨ìˆ˜
function isInputValid(text) {
    // ê³µë°± ì œê±° ë° ì†Œë¬¸ìë¡œ ë³€í™˜
    const cleanedText = text.trim().toLowerCase();

    // í•„í„°ë§ ë‹¨ì–´ê°€ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
    for (const word of prohibitedWords) {
        if (cleanedText.includes(word)) {
            return false;
        }
    }
    return true;
}

// ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ (ë²„íŠ¼ í´ë¦­ ë˜ëŠ” ì—”í„° í‚¤)
document.getElementById("search-btn").addEventListener("click", handleUserInput);
document.getElementById("search-input").addEventListener("keydown", (event) => {
    if (event.key === "Enter") {
        handleUserInput();
        event.preventDefault();
    }
});

// ì‹œê°„ í¬ë§· í•¨ìˆ˜ (HH:mm)
function getCurrentTime() {
    const now = new Date();
    const hours = String(now.getHours()).padStart(2, '0');
    const minutes = String(now.getMinutes()).padStart(2, '0');
    return `${hours}:${minutes}`;
}

// ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬ í•¨ìˆ˜
function handleUserInput() {
    const userInput = document.getElementById("search-input").value;

    // ì…ë ¥ ê¸¸ì´ ê²€ì¦
    if (userInput.length < MIN_INPUT_LENGTH) {
        alert(`ì…ë ¥í•œ ë¬¸ì¥ì´ ë„ˆë¬´ ì§§ìŠµë‹ˆë‹¤. ìµœì†Œ ${MIN_INPUT_LENGTH}ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.`);
        document.getElementById("search-input").value = "";
        return;
    }

    // ìš•ì„¤ ê²€ì¦
    if (!isInputValid(userInput)) {
        alert("ë¶€ì ì ˆí•œ í‘œí˜„ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.");
        document.getElementById("search-input").value = "";
        return;
    }

    if (userInput.trim()) {
        // ì‚¬ìš©ì ì…ë ¥ì„ ë¨¼ì € ëŒ€í™”ì°½ì— ì¶”ê°€
        addLog(userInput, "right");      
        // ìƒˆë¡œìš´ ëœë¤ ë¬¸êµ¬ë¥¼ ë°”ë¡œ ëŒ€í™”ì°½ì— ì¶”ê°€
        const randomMessage = getRandomGreeting();
        addLog(randomMessage, "left");

        // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
        document.getElementById("search-input").value = "";
    }
}

// ì…ë ¥ëœ ë‚´ìš©ì„ ì¹´ë“œì— ì¶”ê°€í•˜ëŠ” í•¨ìˆ˜
function addLog(text, position) {
    const logContainer = document.getElementById("log-container");
    const logItem = document.createElement("div");
    logItem.className = `log-item ${position}`;

    // í…ìŠ¤íŠ¸ì™€ ì‹œê°„ í‘œì‹œ
    const messageText = document.createElement("p");
    messageText.innerText = text;

    const timestamp = document.createElement("span");
    timestamp.className = `timestamp ${position}`;
    timestamp.innerText = getCurrentTime();

    logItem.appendChild(messageText);
    logItem.appendChild(timestamp);

    logContainer.appendChild(logItem);

    // ìë™ ìŠ¤í¬ë¡¤ ì•„ë˜ë¡œ
    logContainer.scrollTop = logContainer.scrollHeight;
}


// ëª…ì–¸ API í˜¸ì¶œ í•¨ìˆ˜
async function fetchQuote() {
    try {
        const response = await fetch("https://korean-advice-open-api.vercel.app/api/advice");
        if (!response.ok) throw new Error("ëª…ì–¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");

        const data = await response.json();
        const { author, authorProfile, message } = data;

        // ëª…ì–¸ ì¹´ë“œ ì—…ë°ì´íŠ¸
        document.getElementById("quote-text").innerText = `"${message}"`;
        document.getElementById("quote-author").innerText = `- ${author} (${authorProfile})`;
    } catch (error) {
        console.error("ëª…ì–¸ ê°€ì ¸ì˜¤ê¸° ì˜¤ë¥˜:", error);
        document.getElementById("quote-text").innerText = "ëª…ì–¸ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ.";
        document.getElementById("quote-author").innerText = "";
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œ ëª…ì–¸ ë¶ˆëŸ¬ì˜¤ê¸°
document.addEventListener("DOMContentLoaded", fetchQuote);

</script>
</body>
</html>
